<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BD TM EARNING BOT</title>

<!-- Monetage SDK -->
<script src='//libtl.com/sdk.js' data-zone='9798399' data-sdk='show_9798399'></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
/* ржЖржЧрзЗрж░ USDT ржмржЯрзЗрж░ ржбрж┐ржЬрж╛ржЗржи ржарж┐ржХ ржПржХржЗржнрж╛ржмрзЗ, рж╢рзБржзрзБ ржмрж╛ржВрж▓рж╛ ржмрзНржпрж╛рж▓рж╛ржирзНрж╕, ржмрж╛ржЯржи ржЯрзЗржХрзНрж╕ржЯ */
:root {
    --tg-theme-bg-color: #121212; --tg-theme-text-color: #e0e0e0;
    --tg-theme-button-color: #007bff; --tg-theme-button-text-color: #ffffff;
    --tg-theme-hint-color: #8a8a8a; --success-color: #28a745;
    --warning-color: #ffc107; --danger-color: #dc3545; --secondary-bg-color: #1e1e1e;
    --border-color: #333333;
}
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto; margin:0; padding:20px 15px 90px 15px; background-color: var(--tg-theme-bg-color); color: var(--tg-theme-text-color); display:flex; flex-direction:column; align-items:center; text-align:center; min-height:100vh; box-sizing:border-box; }
.container { width:100%; max-width:500px; }
.view { display:none; width:100%; animation: fadeIn 0.3s ease-in-out; }
#home-view { display:block; }
/* ржмрж╛ржХрж┐ CSS ржЖржЧрзЗрж░ ржорждрзЛ, рж╣рзЛржо, ржЙржЗржержбрзНрж░, рж░рзЗржлрж╛рж░рж╛рж▓ ржХрж╛рж░рзНржб, ржмрж╛ржЯржи, ржирзНржпрж╛ржнрж┐ржЧрзЗрж╢ржи */
</style>
</head>
<body>

<div class="container">

<!-- Home / Task View -->
<div id="home-view" class="view">
<div class="header"><h1>BD TM EARNING BOT</h1><p>ржмрж┐ржЬрзНржЮрж╛ржкржи ржжрзЗржЦрзБржи ржПржмржВ ржЗржиржХрж╛ржо ржХрж░рзБржи</p></div>
<div class="card">
<h2>ржмрж░рзНрждржорж╛ржи ржмрзНржпрж╛рж▓рж╛ржирзНрж╕</h2>
<div class="balance-amount" id="balanceDisplay">BDT 0.00</div>
<div class="ad-info-grid">
<div class="ad-info-item"><h3 id="adCountDisplay">0</h3><p>ржорзЛржЯ ржПржб ржжрзЗржЦрзЗржЫрзЗржи</p></div>
<div class="ad-info-item"><h3 id="dailyAdCountDisplay">0 / 1000</h3><p>ржЖржЬржХрзЗрж░ ржПржб</p></div>
</div>
</div>
<div class="ad-buttons"><button class="btn" id="rewardedBtn">ржмрж┐ржЬрзНржЮрж╛ржкржи ржжрзЗржЦрзБржи (+0.20 BDT)</button></div>
<button class="btn" id="mainWithdrawBtn" disabled>рззрзж BDT рж╣рж▓рзЗ ржЙржЗржержбрзНрж░ ржХрж░рзБржи</button>
</div>

<!-- Withdraw View -->
<div id="withdraw-view" class="view">
<div class="header"><h1>ржЙржЗржержбрзНрж░</h1><p>ржЖржкржирж╛рж░ ржЗржиржХрж╛ржо рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржХрж░рзБржи</p></div>
<div class="card">
<h2>ржЖржкржирж╛рж░ ржмрзНржпрж╛рж▓рж╛ржирзНрж╕</h2>
<div class="balance-amount" id="withdrawBalanceDisplay">BDT 0.00</div>
<p style="color: var(--tg-theme-hint-color); margin-top:15px;">ржорж┐ржирж┐ржорж╛ржо ржЙржЗржержбрзНрж░: 10 BDT</p>
</div>
<div class="card">
<h2>ржкрзЗржорзЗржирзНржЯ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд</h2>
<div class="input-group">
<label for="paymentAddress">ржмрж┐ржХрж╛рж╢ ржирж╛ржорзНржмрж╛рж░</label>
<input type="text" id="paymentAddress" placeholder="017XXXXXXXX">
</div>
<button class="btn" id="finalWithdrawBtn" disabled>ржЙржЗржержбрзНрж░</button>
</div>
</div>

<!-- Referral View -->
<div id="referral-view" class="view">
<div class="header"><h1>рж░рзЗржлрж╛рж░рзЗрж▓</h1><p>ржмржирзНржзрзБржжрзЗрж░ ржЖржоржирзНрждрзНрж░ржг ржХрж░рзБржи ржПржмржВ ржЖрж░ржУ ржЗржиржХрж╛ржо ржХрж░рзБржи!</p></div>
<div class="card">
<h2>рж░рзЗржлрж╛рж░рзЗрж▓ рж╕рзНржЯрзНржпрж╛ржЯрж╕</h2>
<div class="ad-info-grid">
<div class="ad-info-item"><h3 id="referralCountDisplay">0</h3><p>ржорзЛржЯ рж░рзЗржлрж╛рж░рзЗрж▓</p></div>
<div class="ad-info-item"><h3 id="referralBonusDisplay">BDT 0.00</h3><p>рж░рзЗржлрж╛рж░рзЗрж▓ ржЗржиржХрж╛ржо</p></div>
</div>
</div>
<div class="card">
<h2>ржЖржкржирж╛рж░ рж░рзЗржлрж╛рж░рзЗрж▓ рж▓рж┐ржЩрзНржХ</h2>
<p>ржмржирзНржзрзБржжрзЗрж░ рж╢рзЗржпрж╝рж╛рж░ ржХрж░рзБржиред ржкрзНрж░рждрж┐ржЯрж┐ ржнрзЗрж░рж┐ржлрж╛ржЗржб рж░рзЗржлрж╛рж░рзЗрж▓ ржЬржирзНржп +0.50 BDT!</p>
<p id="referralLink" title="Click to copy"></p>
<p style="font-size:12px; color:var(--tg-theme-hint-color); margin-top:15px;">рж░рзЗржлрж╛рж░рзЗрж▓ ржмрзЛржирж╛рж╕ ржмрзНржпрж╛ржХржПржирзНржб ржжрзНржмрж╛рж░рж╛ ржкрзНрж░рж╕рзЗрж╕ рж╣ржмрзЗред</p>
</div>
</div>

<div class="status-message" id="statusMessage"></div>
<div class="admin-panel" id="adminPanel"><h3>ЁЯСС Admin Panel</h3><p id="userInfo"></p></div>

</div>

<!-- Footer Navigation -->
<footer class="footer-nav">
<button class="nav-btn active" id="navHome"><span>Home</span></button>
<button class="nav-btn" id="navWithdraw"><span>Withdraw</span></button>
<button class="nav-btn" id="navRefer"><span>Referrals</span></button>
</footer>

<script>
// Telegram WebApp
const tg = window.Telegram.WebApp;

// Config
const ADMIN_ID = 7691157254;
const BOT_USERNAME = 'BD_TM_ADS_EARNING_BOT';
const WITHDRAW_THRESHOLD = 10; // BDT
const AD_REWARD = 0.20; // BDT per ad
const DAILY_AD_LIMIT = 1000;
const REFERRAL_BONUS = 0.5;

// State
let state = { balance:0, totalAd:0, dailyAd:0, lastAdDate:null, referralCount:0 };

// Load / Save State
function getToday(){ return new Date().toISOString().split('T')[0]; }
function loadState(){ try{ let s=JSON.parse(localStorage.getItem('bdtmState')); if(s) state={...state,...s}; if(state.lastAdDate!==getToday()){state.dailyAd=0;state.lastAdDate=getToday();saveState();} }catch(e){} }
function saveState(){ localStorage.setItem('bdtmState',JSON.stringify(state)); }

// UI
function updateUI(){
    balanceDisplay.textContent=`BDT ${state.balance.toFixed(2)}`;
    adCountDisplay.textContent=state.totalAd;
    dailyAdCountDisplay.textContent=`${state.dailyAd} / ${DAILY_AD_LIMIT}`;
    withdrawBalanceDisplay.textContent=`BDT ${state.balance.toFixed(2)}`;
    referralCountDisplay.textContent=state.referralCount;
    referralBonusDisplay.textContent=`BDT ${(state.referralCount*REFERRAL_BONUS).toFixed(2)}`;
    const canWithdraw=state.balance>=WITHDRAW_THRESHOLD;
    mainWithdrawBtn.disabled=!canWithdraw;
    finalWithdrawBtn.disabled=!canWithdraw;
    rewardedBtn.disabled=state.dailyAd>=DAILY_AD_LIMIT;
}

// Show status
function showStatus(msg,type='info'){statusMessage.textContent=msg;statusMessage.className=`status-message ${type}`;statusMessage.style.display='block';setTimeout(()=>statusMessage.style.display='none',3000);}

// Views
function showView(v){document.querySelectorAll('.view').forEach(el=>el.style.display='none');document.getElementById(v).style.display='block';document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));if(v==='home-view') navHome.classList.add('active'); else if(v==='withdraw-view') navWithdraw.classList.add('active'); else if(v==='referral-view') navRefer.classList.add('active');}

// Events
rewardedBtn.onclick=function(){
    if(state.dailyAd>=DAILY_AD_LIMIT){ showStatus('ржЖржЬржХрзЗрж░ ржПржб рж▓рж┐ржорж┐ржЯ рж╢рзЗрж╖ред','error'); return; }
    showStatus('ржПржб рж▓рзЛржб рж╣ржЪрзНржЫрзЗ...');
    Promise.resolve(show_9798399()).then(()=>{
        state.totalAd++; state.dailyAd++; state.balance+=AD_REWARD; saveState(); updateUI();
        showStatus(`рж╕рж╛ржлрж▓рзНржп! +${AD_REWARD.toFixed(2)} BDT ржЕрзНржпрж╛ржб рж╣рзЯрзЗ ржЧрзЗржЫрзЗред`,'success');
    }).catch(e=>showStatus('ржПржб рж▓рзЛржб рж╣рзЯржирж┐, ржкрж░рзЗ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред','error'));
};
mainWithdrawBtn.onclick=()=>showView('withdraw-view');
finalWithdrawBtn.onclick=function(){
    const wallet=paymentAddress.value.trim();
    if(state.balance<WITHDRAW_THRESHOLD){ showStatus(`ржирзНржпрзВржирждржо ${WITHDRAW_THRESHOLD} BDT ржкрзНрж░рзЯрзЛржЬржиред`,'error'); return; }
    if(!/^01\d{8,9}$/.test(wallet)){ showStatus('ржмрж┐ржХрж╛рж╢ ржирж╛ржорзНржмрж╛рж░ рж╕ржарж┐ржХ ржирзЯред','error'); return; }
    const user=tg.initDataUnsafe.user;
    const msg=`--- ржЙржЗржержбрзНрж░ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ---\nUser ID: ${user.id}\nName: ${user.first_name}\nUsername: @${user.username || 'N/A'}\nAmount: ${state.balance.toFixed(2)} BDT\nржмрж┐ржХрж╛рж╢: ${wallet}`;
    tg.sendData(msg);
    showStatus('ржЖржкржирж╛рж░ ржЙржЗржержбрзНрж░ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗред','success');
    state.balance=0; saveState(); updateUI(); paymentAddress.value=''; showView('home-view');
};
navHome.onclick=()=>showView('home-view');
navWithdraw.onclick=()=>showView('withdraw-view');
navRefer.onclick=()=>showView('referral-view');

// Init
loadState(); updateUI();
</script>
</body>
</html>